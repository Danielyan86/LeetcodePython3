for ch in s:
    if digit:
        num = ...
    elif operator:
        结算 num
        更新 sign
    elif '(':
        存 res 和 sign
        重置环境
    elif ')':
        结算 num
        出栈合并